{"ast":null,"code":"import raf from \"rc-util/es/raf\";\nimport * as React from 'react';\nfunction smoothScrollOffset(offset) {\n  return Math.floor(Math.pow(offset, 0.5));\n}\nexport function getPageXY(e, horizontal) {\n  var obj = 'touches' in e ? e.touches[0] : e;\n  return obj[horizontal ? 'pageX' : 'pageY'] - window[horizontal ? 'scrollX' : 'scrollY'];\n}\nexport default function useScrollDrag(inVirtual, componentRef, onScrollOffset) {\n  React.useEffect(function () {\n    var ele = componentRef.current;\n    if (inVirtual && ele) {\n      var mouseDownLock = false;\n      var rafId;\n      var _offset;\n      var stopScroll = function stopScroll() {\n        raf.cancel(rafId);\n      };\n      var continueScroll = function continueScroll() {\n        stopScroll();\n        rafId = raf(function () {\n          onScrollOffset(_offset);\n          continueScroll();\n        });\n      };\n      var onMouseDown = function onMouseDown(e) {\n        // Skip if nest List has handled this event\n        var event = e;\n        if (!event._virtualHandled) {\n          event._virtualHandled = true;\n          mouseDownLock = true;\n        }\n      };\n      var onMouseUp = function onMouseUp() {\n        mouseDownLock = false;\n        stopScroll();\n      };\n      var onMouseMove = function onMouseMove(e) {\n        if (mouseDownLock) {\n          var mouseY = getPageXY(e, false);\n          var _ele$getBoundingClien = ele.getBoundingClientRect(),\n            top = _ele$getBoundingClien.top,\n            bottom = _ele$getBoundingClien.bottom;\n          if (mouseY <= top) {\n            var diff = top - mouseY;\n            _offset = -smoothScrollOffset(diff);\n            continueScroll();\n          } else if (mouseY >= bottom) {\n            var _diff = mouseY - bottom;\n            _offset = smoothScrollOffset(_diff);\n            continueScroll();\n          } else {\n            stopScroll();\n          }\n        }\n      };\n      ele.addEventListener('mousedown', onMouseDown);\n      ele.ownerDocument.addEventListener('mouseup', onMouseUp);\n      ele.ownerDocument.addEventListener('mousemove', onMouseMove);\n      return function () {\n        ele.removeEventListener('mousedown', onMouseDown);\n        ele.ownerDocument.removeEventListener('mouseup', onMouseUp);\n        ele.ownerDocument.removeEventListener('mousemove', onMouseMove);\n        stopScroll();\n      };\n    }\n  }, [inVirtual]);\n}","map":{"version":3,"names":["raf","React","smoothScrollOffset","offset","Math","floor","pow","getPageXY","e","horizontal","obj","touches","window","useScrollDrag","inVirtual","componentRef","onScrollOffset","useEffect","ele","current","mouseDownLock","rafId","_offset","stopScroll","cancel","continueScroll","onMouseDown","event","_virtualHandled","onMouseUp","onMouseMove","mouseY","_ele$getBoundingClien","getBoundingClientRect","top","bottom","diff","_diff","addEventListener","ownerDocument","removeEventListener"],"sources":["/Users/lingxin/myapp/draw/node_modules/rc-virtual-list/es/hooks/useScrollDrag.js"],"sourcesContent":["import raf from \"rc-util/es/raf\";\nimport * as React from 'react';\nfunction smoothScrollOffset(offset) {\n  return Math.floor(Math.pow(offset, 0.5));\n}\nexport function getPageXY(e, horizontal) {\n  var obj = 'touches' in e ? e.touches[0] : e;\n  return obj[horizontal ? 'pageX' : 'pageY'] - window[horizontal ? 'scrollX' : 'scrollY'];\n}\nexport default function useScrollDrag(inVirtual, componentRef, onScrollOffset) {\n  React.useEffect(function () {\n    var ele = componentRef.current;\n    if (inVirtual && ele) {\n      var mouseDownLock = false;\n      var rafId;\n      var _offset;\n      var stopScroll = function stopScroll() {\n        raf.cancel(rafId);\n      };\n      var continueScroll = function continueScroll() {\n        stopScroll();\n        rafId = raf(function () {\n          onScrollOffset(_offset);\n          continueScroll();\n        });\n      };\n      var onMouseDown = function onMouseDown(e) {\n        // Skip if nest List has handled this event\n        var event = e;\n        if (!event._virtualHandled) {\n          event._virtualHandled = true;\n          mouseDownLock = true;\n        }\n      };\n      var onMouseUp = function onMouseUp() {\n        mouseDownLock = false;\n        stopScroll();\n      };\n      var onMouseMove = function onMouseMove(e) {\n        if (mouseDownLock) {\n          var mouseY = getPageXY(e, false);\n          var _ele$getBoundingClien = ele.getBoundingClientRect(),\n            top = _ele$getBoundingClien.top,\n            bottom = _ele$getBoundingClien.bottom;\n          if (mouseY <= top) {\n            var diff = top - mouseY;\n            _offset = -smoothScrollOffset(diff);\n            continueScroll();\n          } else if (mouseY >= bottom) {\n            var _diff = mouseY - bottom;\n            _offset = smoothScrollOffset(_diff);\n            continueScroll();\n          } else {\n            stopScroll();\n          }\n        }\n      };\n      ele.addEventListener('mousedown', onMouseDown);\n      ele.ownerDocument.addEventListener('mouseup', onMouseUp);\n      ele.ownerDocument.addEventListener('mousemove', onMouseMove);\n      return function () {\n        ele.removeEventListener('mousedown', onMouseDown);\n        ele.ownerDocument.removeEventListener('mouseup', onMouseUp);\n        ele.ownerDocument.removeEventListener('mousemove', onMouseMove);\n        stopScroll();\n      };\n    }\n  }, [inVirtual]);\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}