{"ast":null,"code":"import _objectSpread from\"/Users/lingxin/myapp/draw/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _taggedTemplateLiteral from\"/Users/lingxin/myapp/draw/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject10,_templateObject11,_templateObject12,_templateObject13,_templateObject14,_templateObject15,_templateObject16,_templateObject17;import React,{useState,useRef}from'react';import{Button,message,Select,Modal,InputNumber,Slider}from'antd';import{CloseOutlined,PlayCircleOutlined,PauseCircleOutlined,SoundOutlined,SoundFilled}from'@ant-design/icons';import styled,{css}from'styled-components';import bgImage from'./pics/bg.jpg';import bgMusic from'./music/背景音乐.wav';import rollMusic from'./music/滚动音乐.wav';import winMusic from'./music/中奖音乐.wav';import{useAudioControl}from'./hooks/useAudioControl';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AppContainer=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  min-height: 100vh;\\n  background: url(\",\") no-repeat center center fixed;\\n  background-size: cover;\\n  padding: 20px;\\n  color: white;\\n  position: relative;\\n  \\n  & > * {\\n    position: relative;\\n    z-index: 1;\\n  }\\n\"])),bgImage);const Header=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  text-align: center;\\n  font-size: 24px;\\n  margin-bottom: 20px;\\n\"])));const MainContent=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  display: flex;\\n  gap: 20px;\\n  justify-content: center;\\n  padding: 0 20px;\\n\"])));const DrawBox=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  position: relative;\\n  max-width: 800px;\\n\"])));const PrizeBox=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  width: 400px;\\n  height: 400px;\\n  background: linear-gradient(135deg, #ff1a1a 0%, #cc0000 100%);\\n  border-radius: 20px;\\n  position: relative;\\n  margin: 40px 0;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n\"])));const DrawNumber=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  font-size: 120px;\\n  font-weight: bold;\\n  text-align: center;\\n  color: #ffd700;\\n  text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);\\n  height: 140px;\\n  line-height: 140px;\\n  overflow: hidden;\\n  position: relative;\\n  transition: all 0.2s ease;\\n  \\n  \",\"\\n\"])),props=>props.isDrawing&&css(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n    transform: scale(1.1);\\n  \"]))));const BottomControls=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  gap: 20px;\\n  margin-top: 20px;\\n  background: rgba(0, 0, 0, 0.2);\\n  padding: 15px;\\n  border-radius: 10px;\\n  width: 100%;\\n  max-width: 600px;\\n\"])));const PrizeSelect=styled(Select)(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  &.ant-select {\\n    width: 150px;\\n    \\n    .ant-select-selector {\\n      background: rgba(0, 0, 0, 0.3) !important;\\n      border: none !important;\\n      color: #fff !important;\\n    }\\n  }\\n\"])));const StartButton=styled(Button)(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n  &.ant-btn {\\n    height: 40px;\\n    padding: 0 30px;\\n    background: linear-gradient(135deg, #ffd700 0%, #ffaa00 100%);\\n    border: none;\\n    font-size: 18px;\\n    font-weight: bold;\\n    color: #8b0000;\\n    \\n    &:hover {\\n      background: linear-gradient(135deg, #ffe44d 0%, #ffbb33 100%);\\n    }\\n  }\\n\"])));const ParticipantCount=styled.div(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n  color: #ffd700;\\n  font-size: 16px;\\n  display: flex;\\n  align-items: center;\\n  gap: 5px;\\n  \\n  &::before {\\n    content: '\\u53C2\\u4E0E\\u4EBA\\u6570:';\\n    color: #fff;\\n  }\\n\"])));const WinnerList=styled.div(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\n  width: 300px;\\n  background: rgba(153, 0, 0, 0.3);\\n  border-radius: 10px;\\n  padding: 20px;\\n  backdrop-filter: blur(10px);\\n\"])));const WinnerItem=styled.div(_templateObject13||(_templateObject13=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  margin-bottom: 10px;\\n  padding: 10px;\\n  background: rgba(255, 255, 255, 0.1);\\n  border-radius: 5px;\\n  transition: all 0.3s ease;\\n  position: relative;\\n  \\n  &:hover {\\n    background: rgba(255, 255, 255, 0.2);\\n    \\n    .delete-button {\\n      opacity: 1;\\n    }\\n  }\\n  \\n  .delete-button {\\n    position: absolute;\\n    top: 5px;\\n    right: 5px;\\n    opacity: 0;\\n    transition: opacity 0.3s ease;\\n    color: #ff4d4f;\\n    cursor: pointer;\\n    \\n    &:hover {\\n      color: #ff7875;\\n    }\\n  }\\n\"])));const WinnerInfo=styled.div(_templateObject14||(_templateObject14=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  \\n  .prize-name {\\n    color: #ffd700;\\n    font-weight: bold;\\n    margin-bottom: 4px;\\n  }\\n  \\n  .number {\\n    color: #fff;\\n  }\\n\"])));const SoundButton=styled(Button)(_templateObject15||(_templateObject15=_taggedTemplateLiteral([\"\\n  position: fixed;\\n  top: 20px;\\n  right: 20px;\\n  width: 40px;\\n  height: 40px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background: none !important;\\n  border: none !important;\\n  padding: 0;\\n  transition: all 0.3s ease;\\n  cursor: pointer;\\n  z-index: 1000;\\n  \\n  &:hover {\\n    background: none !important;\\n    transform: scale(1.1);\\n    opacity: 0.8;\\n  }\\n  \\n  &:active {\\n    transform: scale(0.95);\\n  }\\n  \\n  &::after {\\n    display: none !important;\\n  }\\n  \\n  .anticon {\\n    font-size: 24px;\\n    color: #fff;\\n  }\\n\"])));const NumberRangeModal=styled(Modal)(_templateObject16||(_templateObject16=_taggedTemplateLiteral([\"\\n  .ant-modal-content {\\n    background: rgba(0, 0, 0, 0.8);\\n    border-radius: 10px;\\n  }\\n  \\n  .ant-modal-header {\\n    background: none;\\n    border-bottom: none;\\n  }\\n  \\n  .ant-modal-title {\\n    color: #fff;\\n  }\\n  \\n  .ant-modal-body {\\n    padding: 20px;\\n    \\n    .range-inputs {\\n      display: flex;\\n      gap: 20px;\\n      align-items: center;\\n      \\n      span {\\n        color: #fff;\\n      }\\n    }\\n  }\\n\"])));const MuteIcon=styled.div(_templateObject17||(_templateObject17=_taggedTemplateLiteral([\"\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n\\n  .sound-icon {\\n    color: #fff;\\n    font-size: 24px;\\n  }\\n\\n  &::after {\\n    content: '';\\n    position: absolute;\\n    width: 2px;\\n    height: 24px;\\n    background-color: #fff;\\n    transform: rotate(45deg);\\n    left: 50%;\\n  }\\n\"])));// Add number formatting utility function\nconst formatNumber=num=>{return(num===null||num===void 0?void 0:num.toString().padStart(3,'0'))||'???';};function App(){const[participants,setParticipants]=useState([]);const[currentPrize,setCurrentPrize]=useState('一等奖');const[isDrawing,setIsDrawing]=useState(false);const[currentNumber,setCurrentNumber]=useState(null);const[winners,setWinners]=useState([]);const[isModalVisible,setIsModalVisible]=useState(false);const[numberRange,setNumberRange]=useState({start:1,end:100});const animationRef=useRef(null);const displayNumberRef=useRef(null);// 使用音频控制hook\nconst{isMuted,toggleMute,playRollMusic,playWinMusic}=useAudioControl(bgMusic,rollMusic,winMusic);// 开始抽奖\nconst startDraw=async()=>{if(participants.length===0){message.error('请先生成抽奖号码');return;}// 获取可用号码\nconst availableNumbers=participants.filter(num=>!winners.some(winner=>winner.number===num));if(availableNumbers.length===0){message.error('所有号码已抽完');return;}setIsDrawing(true);playRollMusic();const draw=()=>{const randomIndex=Math.floor(Math.random()*availableNumbers.length);const selectedNumber=availableNumbers[randomIndex];displayNumberRef.current=selectedNumber;// 保存实际显示的数字\nsetCurrentNumber(selectedNumber);animationRef.current=requestAnimationFrame(draw);};animationRef.current=requestAnimationFrame(draw);};// 停止抽奖\nconst stopDraw=()=>{if(!isDrawing)return;// 先停止动画\ncancelAnimationFrame(animationRef.current);// 确保使用实际显示的数字\nconst finalNumber=displayNumberRef.current;setCurrentNumber(finalNumber);setIsDrawing(false);playWinMusic();// 只在有确定的中奖号码时添加到记录\nif(finalNumber!==null){setWinners(prev=>[...prev,{prize:currentPrize,number:finalNumber,timestamp:Date.now()}]);}};const deleteWinner=index=>{setWinners(prev=>prev.filter((_,i)=>i!==index));};const showNumberRangeModal=()=>{setIsModalVisible(true);};const handleModalOk=()=>{if(numberRange.start>=numberRange.end){message.error('起始号码必须小于结束号码');return;}generateNumbers(numberRange.start,numberRange.end);setIsModalVisible(false);};const generateNumbers=(start,end)=>{const numbers=Array.from({length:end-start+1},(_,i)=>start+i);setParticipants(numbers);message.success('号码生成成功');};return/*#__PURE__*/_jsxs(AppContainer,{children:[/*#__PURE__*/_jsx(SoundButton,{onClick:toggleMute,children:isMuted?/*#__PURE__*/_jsx(MuteIcon,{children:/*#__PURE__*/_jsx(SoundFilled,{className:\"sound-icon\"})}):/*#__PURE__*/_jsx(SoundFilled,{})}),/*#__PURE__*/_jsx(Header,{children:/*#__PURE__*/_jsx(\"h2\",{children:\"\\u62BD\\u5956\\u7CFB\\u7EDF\"})}),/*#__PURE__*/_jsxs(MainContent,{children:[/*#__PURE__*/_jsxs(DrawBox,{children:[/*#__PURE__*/_jsx(PrizeBox,{children:/*#__PURE__*/_jsx(DrawNumber,{isDrawing:isDrawing,number:formatNumber(currentNumber),children:formatNumber(currentNumber)})}),/*#__PURE__*/_jsxs(BottomControls,{children:[/*#__PURE__*/_jsxs(PrizeSelect,{value:currentPrize,onChange:value=>setCurrentPrize(value),children:[/*#__PURE__*/_jsx(Select.Option,{value:\"\\u4E00\\u7B49\\u5956\",children:\"\\u4E00\\u7B49\\u5956\"}),/*#__PURE__*/_jsx(Select.Option,{value:\"\\u4E8C\\u7B49\\u5956\",children:\"\\u4E8C\\u7B49\\u5956\"}),/*#__PURE__*/_jsx(Select.Option,{value:\"\\u4E09\\u7B49\\u5956\",children:\"\\u4E09\\u7B49\\u5956\"})]}),/*#__PURE__*/_jsxs(ParticipantCount,{children:[\"\\u5269\\u4F59\\u53F7\\u7801: \",participants.length-winners.length]}),!isDrawing?/*#__PURE__*/_jsx(StartButton,{type:\"primary\",onClick:startDraw,disabled:participants.length===winners.length,children:\"\\u5F00\\u59CB\\u62BD\\u5956\"}):/*#__PURE__*/_jsx(StartButton,{type:\"primary\",onClick:stopDraw,children:\"\\u505C\\u6B62\"}),participants.length===0&&/*#__PURE__*/_jsx(Button,{onClick:showNumberRangeModal,children:\"\\u751F\\u6210\\u53F7\\u7801\"})]})]}),/*#__PURE__*/_jsxs(WinnerList,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u4E2D\\u5956\\u8BB0\\u5F55\"}),winners.map((winner,index)=>/*#__PURE__*/_jsxs(WinnerItem,{children:[/*#__PURE__*/_jsxs(WinnerInfo,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"prize-name\",children:winner.prize}),/*#__PURE__*/_jsxs(\"div\",{className:\"number\",children:[\"\\u4E2D\\u5956\\u53F7\\u7801: \",formatNumber(winner.number)]})]}),/*#__PURE__*/_jsx(CloseOutlined,{className:\"delete-button\",onClick:()=>deleteWinner(index)})]},index))]})]}),/*#__PURE__*/_jsx(NumberRangeModal,{title:\"\\u8BBE\\u7F6E\\u53F7\\u7801\\u8303\\u56F4\",visible:isModalVisible,onOk:handleModalOk,onCancel:()=>setIsModalVisible(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"range-inputs\",children:[/*#__PURE__*/_jsx(InputNumber,{min:1,value:numberRange.start,onChange:value=>setNumberRange(prev=>_objectSpread(_objectSpread({},prev),{},{start:value})),placeholder:\"\\u8D77\\u59CB\\u53F7\\u7801\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u81F3\"}),/*#__PURE__*/_jsx(InputNumber,{min:1,value:numberRange.end,onChange:value=>setNumberRange(prev=>_objectSpread(_objectSpread({},prev),{},{end:value})),placeholder:\"\\u7ED3\\u675F\\u53F7\\u7801\"})]})})]});}export default App;","map":{"version":3,"names":["React","useState","useRef","Button","message","Select","Modal","InputNumber","Slider","CloseOutlined","PlayCircleOutlined","PauseCircleOutlined","SoundOutlined","SoundFilled","styled","css","bgImage","bgMusic","rollMusic","winMusic","useAudioControl","jsx","_jsx","jsxs","_jsxs","AppContainer","div","_templateObject","_taggedTemplateLiteral","Header","_templateObject2","MainContent","_templateObject3","DrawBox","_templateObject4","PrizeBox","_templateObject5","DrawNumber","_templateObject6","props","isDrawing","_templateObject7","BottomControls","_templateObject8","PrizeSelect","_templateObject9","StartButton","_templateObject10","ParticipantCount","_templateObject11","WinnerList","_templateObject12","WinnerItem","_templateObject13","WinnerInfo","_templateObject14","SoundButton","_templateObject15","NumberRangeModal","_templateObject16","MuteIcon","_templateObject17","formatNumber","num","toString","padStart","App","participants","setParticipants","currentPrize","setCurrentPrize","setIsDrawing","currentNumber","setCurrentNumber","winners","setWinners","isModalVisible","setIsModalVisible","numberRange","setNumberRange","start","end","animationRef","displayNumberRef","isMuted","toggleMute","playRollMusic","playWinMusic","startDraw","length","error","availableNumbers","filter","some","winner","number","draw","randomIndex","Math","floor","random","selectedNumber","current","requestAnimationFrame","stopDraw","cancelAnimationFrame","finalNumber","prev","prize","timestamp","Date","now","deleteWinner","index","_","i","showNumberRangeModal","handleModalOk","generateNumbers","numbers","Array","from","success","children","onClick","className","value","onChange","Option","type","disabled","map","title","visible","onOk","onCancel","min","_objectSpread","placeholder"],"sources":["/Users/lingxin/myapp/draw/src/App.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { Button, message, Select, Modal, InputNumber, Slider } from 'antd';\nimport { \n  CloseOutlined, \n  PlayCircleOutlined, \n  PauseCircleOutlined, \n  SoundOutlined,\n  SoundFilled\n} from '@ant-design/icons';\nimport styled, { css } from 'styled-components';\nimport bgImage from './pics/bg.jpg';\nimport bgMusic from './music/背景音乐.wav';\nimport rollMusic from './music/滚动音乐.wav';\nimport winMusic from './music/中奖音乐.wav';\nimport { useAudioControl } from './hooks/useAudioControl';\n\nconst AppContainer = styled.div`\n  min-height: 100vh;\n  background: url(${bgImage}) no-repeat center center fixed;\n  background-size: cover;\n  padding: 20px;\n  color: white;\n  position: relative;\n  \n  & > * {\n    position: relative;\n    z-index: 1;\n  }\n`;\n\nconst Header = styled.div`\n  text-align: center;\n  font-size: 24px;\n  margin-bottom: 20px;\n`;\n\nconst MainContent = styled.div`\n  display: flex;\n  gap: 20px;\n  justify-content: center;\n  padding: 0 20px;\n`;\n\nconst DrawBox = styled.div`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n  max-width: 800px;\n`;\n\nconst PrizeBox = styled.div`\n  width: 400px;\n  height: 400px;\n  background: linear-gradient(135deg, #ff1a1a 0%, #cc0000 100%);\n  border-radius: 20px;\n  position: relative;\n  margin: 40px 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst DrawNumber = styled.div`\n  font-size: 120px;\n  font-weight: bold;\n  text-align: center;\n  color: #ffd700;\n  text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);\n  height: 140px;\n  line-height: 140px;\n  overflow: hidden;\n  position: relative;\n  transition: all 0.2s ease;\n  \n  ${props => props.isDrawing && css`\n    transform: scale(1.1);\n  `}\n`;\n\nconst BottomControls = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 20px;\n  margin-top: 20px;\n  background: rgba(0, 0, 0, 0.2);\n  padding: 15px;\n  border-radius: 10px;\n  width: 100%;\n  max-width: 600px;\n`;\n\nconst PrizeSelect = styled(Select)`\n  &.ant-select {\n    width: 150px;\n    \n    .ant-select-selector {\n      background: rgba(0, 0, 0, 0.3) !important;\n      border: none !important;\n      color: #fff !important;\n    }\n  }\n`;\n\nconst StartButton = styled(Button)`\n  &.ant-btn {\n    height: 40px;\n    padding: 0 30px;\n    background: linear-gradient(135deg, #ffd700 0%, #ffaa00 100%);\n    border: none;\n    font-size: 18px;\n    font-weight: bold;\n    color: #8b0000;\n    \n    &:hover {\n      background: linear-gradient(135deg, #ffe44d 0%, #ffbb33 100%);\n    }\n  }\n`;\n\nconst ParticipantCount = styled.div`\n  color: #ffd700;\n  font-size: 16px;\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  \n  &::before {\n    content: '参与人数:';\n    color: #fff;\n  }\n`;\n\nconst WinnerList = styled.div`\n  width: 300px;\n  background: rgba(153, 0, 0, 0.3);\n  border-radius: 10px;\n  padding: 20px;\n  backdrop-filter: blur(10px);\n`;\n\nconst WinnerItem = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n  padding: 10px;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 5px;\n  transition: all 0.3s ease;\n  position: relative;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 0.2);\n    \n    .delete-button {\n      opacity: 1;\n    }\n  }\n  \n  .delete-button {\n    position: absolute;\n    top: 5px;\n    right: 5px;\n    opacity: 0;\n    transition: opacity 0.3s ease;\n    color: #ff4d4f;\n    cursor: pointer;\n    \n    &:hover {\n      color: #ff7875;\n    }\n  }\n`;\n\nconst WinnerInfo = styled.div`\n  display: flex;\n  flex-direction: column;\n  \n  .prize-name {\n    color: #ffd700;\n    font-weight: bold;\n    margin-bottom: 4px;\n  }\n  \n  .number {\n    color: #fff;\n  }\n`;\n\nconst SoundButton = styled(Button)`\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: none !important;\n  border: none !important;\n  padding: 0;\n  transition: all 0.3s ease;\n  cursor: pointer;\n  z-index: 1000;\n  \n  &:hover {\n    background: none !important;\n    transform: scale(1.1);\n    opacity: 0.8;\n  }\n  \n  &:active {\n    transform: scale(0.95);\n  }\n  \n  &::after {\n    display: none !important;\n  }\n  \n  .anticon {\n    font-size: 24px;\n    color: #fff;\n  }\n`;\n\nconst NumberRangeModal = styled(Modal)`\n  .ant-modal-content {\n    background: rgba(0, 0, 0, 0.8);\n    border-radius: 10px;\n  }\n  \n  .ant-modal-header {\n    background: none;\n    border-bottom: none;\n  }\n  \n  .ant-modal-title {\n    color: #fff;\n  }\n  \n  .ant-modal-body {\n    padding: 20px;\n    \n    .range-inputs {\n      display: flex;\n      gap: 20px;\n      align-items: center;\n      \n      span {\n        color: #fff;\n      }\n    }\n  }\n`;\n\nconst MuteIcon = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  .sound-icon {\n    color: #fff;\n    font-size: 24px;\n  }\n\n  &::after {\n    content: '';\n    position: absolute;\n    width: 2px;\n    height: 24px;\n    background-color: #fff;\n    transform: rotate(45deg);\n    left: 50%;\n  }\n`;\n\n// Add number formatting utility function\nconst formatNumber = (num) => {\n  return num?.toString().padStart(3, '0') || '???';\n};\n\nfunction App() {\n  const [participants, setParticipants] = useState([]);\n  const [currentPrize, setCurrentPrize] = useState('一等奖');\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [currentNumber, setCurrentNumber] = useState(null);\n  const [winners, setWinners] = useState([]);\n  const [isModalVisible, setIsModalVisible] = useState(false);\n  const [numberRange, setNumberRange] = useState({ start: 1, end: 100 });\n  const animationRef = useRef(null);\n  const displayNumberRef = useRef(null);\n\n  // 使用音频控制hook\n  const { isMuted, toggleMute, playRollMusic, playWinMusic } = useAudioControl(\n    bgMusic,\n    rollMusic,\n    winMusic\n  );\n\n  // 开始抽奖\n  const startDraw = async () => {\n    if (participants.length === 0) {\n      message.error('请先生成抽奖号码');\n      return;\n    }\n\n    // 获取可用号码\n    const availableNumbers = participants.filter(\n      num => !winners.some(winner => winner.number === num)\n    );\n\n    if (availableNumbers.length === 0) {\n      message.error('所有号码已抽完');\n      return;\n    }\n\n    setIsDrawing(true);\n    playRollMusic();\n\n    const draw = () => {\n      const randomIndex = Math.floor(Math.random() * availableNumbers.length);\n      const selectedNumber = availableNumbers[randomIndex];\n      displayNumberRef.current = selectedNumber; // 保存实际显示的数字\n      setCurrentNumber(selectedNumber);\n      animationRef.current = requestAnimationFrame(draw);\n    };\n\n    animationRef.current = requestAnimationFrame(draw);\n  };\n\n  // 停止抽奖\n  const stopDraw = () => {\n    if (!isDrawing) return;\n\n    // 先停止动画\n    cancelAnimationFrame(animationRef.current);\n    \n    // 确保使用实际显示的数字\n    const finalNumber = displayNumberRef.current;\n    setCurrentNumber(finalNumber);\n    setIsDrawing(false);\n    \n    playWinMusic();\n\n    // 只在有确定的中奖号码时添加到记录\n    if (finalNumber !== null) {\n      setWinners(prev => [...prev, {\n        prize: currentPrize,\n        number: finalNumber,\n        timestamp: Date.now()\n      }]);\n    }\n  };\n\n  const deleteWinner = (index) => {\n    setWinners(prev => prev.filter((_, i) => i !== index));\n  };\n\n  const showNumberRangeModal = () => {\n    setIsModalVisible(true);\n  };\n\n  const handleModalOk = () => {\n    if (numberRange.start >= numberRange.end) {\n      message.error('起始号码必须小于结束号码');\n      return;\n    }\n    generateNumbers(numberRange.start, numberRange.end);\n    setIsModalVisible(false);\n  };\n\n  const generateNumbers = (start, end) => {\n    const numbers = Array.from(\n      { length: end - start + 1 }, \n      (_, i) => start + i\n    );\n    setParticipants(numbers);\n    message.success('号码生成成功');\n  };\n\n  return (\n    <AppContainer>\n      <SoundButton \n        onClick={toggleMute}\n      >\n        {isMuted ? (\n          <MuteIcon>\n            <SoundFilled className=\"sound-icon\" />\n          </MuteIcon>\n        ) : (\n          <SoundFilled />\n        )}\n      </SoundButton>\n      <Header>\n        <h2>抽奖系统</h2>\n      </Header>\n      \n      <MainContent>\n        <DrawBox>\n          <PrizeBox>\n            <DrawNumber \n              isDrawing={isDrawing}\n              number={formatNumber(currentNumber)}\n            >\n              {formatNumber(currentNumber)}\n            </DrawNumber>\n          </PrizeBox>\n          \n          <BottomControls>\n            <PrizeSelect\n              value={currentPrize}\n              onChange={value => setCurrentPrize(value)}\n            >\n              <Select.Option value=\"一等奖\">一等奖</Select.Option>\n              <Select.Option value=\"二等奖\">二等奖</Select.Option>\n              <Select.Option value=\"三等奖\">三等奖</Select.Option>\n            </PrizeSelect>\n            \n            <ParticipantCount>\n              剩余号码: {participants.length - winners.length}\n            </ParticipantCount>\n            \n            {!isDrawing ? (\n              <StartButton\n                type=\"primary\"\n                onClick={startDraw}\n                disabled={participants.length === winners.length}\n              >\n                开始抽奖\n              </StartButton>\n            ) : (\n              <StartButton\n                type=\"primary\"\n                onClick={stopDraw}\n              >\n                停止\n              </StartButton>\n            )}\n            \n            {participants.length === 0 && (\n              <Button onClick={showNumberRangeModal}>\n                生成号码\n              </Button>\n            )}\n          </BottomControls>\n        </DrawBox>\n        \n        <WinnerList>\n          <h3>中奖记录</h3>\n          {winners.map((winner, index) => (\n            <WinnerItem key={index}>\n              <WinnerInfo>\n                <div className=\"prize-name\">{winner.prize}</div>\n                <div className=\"number\">中奖号码: {formatNumber(winner.number)}</div>\n              </WinnerInfo>\n              <CloseOutlined \n                className=\"delete-button\"\n                onClick={() => deleteWinner(index)}\n              />\n            </WinnerItem>\n          ))}\n        </WinnerList>\n      </MainContent>\n\n      <NumberRangeModal\n        title=\"设置号码范围\"\n        visible={isModalVisible}\n        onOk={handleModalOk}\n        onCancel={() => setIsModalVisible(false)}\n      >\n        <div className=\"range-inputs\">\n          <InputNumber\n            min={1}\n            value={numberRange.start}\n            onChange={value => setNumberRange(prev => ({ ...prev, start: value }))}\n            placeholder=\"起始号码\"\n          />\n          <span>至</span>\n          <InputNumber\n            min={1}\n            value={numberRange.end}\n            onChange={value => setNumberRange(prev => ({ ...prev, end: value }))}\n            placeholder=\"结束号码\"\n          />\n        </div>\n      </NumberRangeModal>\n    </AppContainer>\n  );\n}\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}